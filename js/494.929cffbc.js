"use strict";(self["webpackChunkweek8"]=self["webpackChunkweek8"]||[]).push([[494],{2494:function(t,a,e){e.r(a),e.d(a,{default:function(){return A}});var s=e(3396),i=e(7139),o=e(9242);const n=(0,s.uE)('<div class="d-flex"><a href="#"><i class="fas fa-heart me-5"></i></a><a href="./cart-2.html"><i class="fas fa-shopping-cart"></i></a></div>',1),r={class:"navbar navbar-expand-lg navbar-light justify-content-center border border-start-0 border-end-0 border-top border-bottom"},c={class:"navbar-nav flex-row overflow-auto navbar-custom-scroll"},l=(0,s.Uk)("全部商品"),d=(0,s.Uk)("香氛蠟燭"),p=(0,s.Uk)("教學課程"),g=(0,s.Uk)("香氛小物"),u={class:"container mt-md-5 mt-3 mb-7"},h={class:"row row-cols-1 row-cols-md-3 row-cols-lg-5 gy-4"},m={class:"card border-1 mb-4 position-relative position-relative h-100",style:{padding:"0.5rem"}},v=(0,s._)("a",{href:"#",class:"text-dark"},[(0,s._)("i",{class:"far fa-heart position-absolute",style:{right:"16px",top:"16px"}})],-1),k={class:"card-body p-0"},b={class:"mb-0 mt-3"},_={class:"card-text text-muted mb-0",style:{height:"4.5 rem",overflow:"hidden"}},w={key:0,class:"text-muted mt-3"},f={class:"text-muted mt-3"},x={class:"btn-group btn-group-sm"},P={type:"button",class:"btn btn-outline-secondary"},y=(0,s.Uk)("查看更多"),C=["onClick","disabled"],$={class:"spinner-grow spinner-grow-sm"},D=(0,s.Uk)(" 加到購物車 ");function I(t,a,e,I,z,U){const W=(0,s.up)("router-link"),L=(0,s.up)("Pagination");return(0,s.wg)(),(0,s.iD)(s.HY,null,[n,(0,s._)("nav",r,[(0,s._)("div",c,[(0,s.Wm)(W,{to:"products",class:"nav-item nav-link text-nowrap px-2",onClick:a[0]||(a[0]=t=>U.getProducts(1,""))},{default:(0,s.w5)((()=>[l])),_:1}),(0,s.Wm)(W,{to:"products",class:"nav-item nav-link text-nowrap px-2",onClick:a[1]||(a[1]=t=>U.getProducts(1,"韓式香氛蠟燭"))},{default:(0,s.w5)((()=>[d])),_:1}),(0,s.Wm)(W,{to:"products",class:"nav-item nav-link text-nowrap px-2",onClick:a[2]||(a[2]=t=>U.getProducts(1,"教學課程"))},{default:(0,s.w5)((()=>[p])),_:1}),(0,s.Wm)(W,{to:"products",class:"nav-item nav-link text-nowrap px-2",onClick:a[3]||(a[3]=t=>U.getProducts(1,"香氛小物"))},{default:(0,s.w5)((()=>[g])),_:1})])]),(0,s._)("div",u,[(0,s._)("div",h,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(z.products,(t=>((0,s.wg)(),(0,s.iD)("div",{class:"col",key:t.id},[(0,s._)("div",m,[(0,s._)("div",{style:(0,i.j5)([{backgroundImage:`url(${t.imageUrl})`},{height:"320px","background-size":"cover","background-position":"center center"}])},null,4),v,(0,s._)("div",k,[(0,s._)("h4",b,(0,i.zw)(t.title),1),(0,s._)("p",_,(0,i.zw)(t.description),1),t.price?((0,s.wg)(),(0,s.iD)("del",w,"原價 "+(0,i.zw)(t.origin_price)+" 元",1)):(0,s.kq)("",!0),(0,s._)("span",f,"／特價 "+(0,i.zw)(t.price)+"元",1)]),(0,s._)("div",x,[(0,s._)("button",P,[(0,s.Wm)(W,{to:`/product/${t.id}`},{default:(0,s.w5)((()=>[y])),_:2},1032,["to"])]),(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:a=>U.addToCart(t.id),disabled:z.isLoadingItem===t.id},[(0,s.wy)((0,s._)("span",$,null,512),[[o.F8,z.isLoadingItem===t.id]]),D],8,C)])])])))),128))]),(0,s.Wm)(L,{pages:z.pagination,onEmitPages:U.getProducts},null,8,["pages","onEmitPages"])])],64)}var z=e(9868);const U={"aria-label":"Page navigation"},W={class:"pagination justify-content-center",style:{"padding-top":"1rem"}},L=(0,s._)("span",{"aria-hidden":"true"},"«",-1),j=[L],E={key:0,class:"page-link"},H=["onClick"],M=(0,s._)("span",{"aria-hidden":"true"},"»",-1),Y=[M];function Z(t,a,e,n,r,c){return(0,s.wg)(),(0,s.iD)("nav",U,[(0,s._)("ul",W,[(0,s._)("li",{class:(0,i.C_)([{disabled:!e.pages.has_pre},"page-item"])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:a[0]||(a[0]=(0,o.iM)((t=>c.updatePage(e.pages.current_page-1)),["prevent"]))},j)],2),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.pages.total_pages,(t=>((0,s.wg)(),(0,s.iD)("li",{class:(0,i.C_)(["page-item",{active:e.pages.current_page===t}]),key:t},[t===e.pages.current_page?((0,s.wg)(),(0,s.iD)("span",E,(0,i.zw)(t),1)):((0,s.wg)(),(0,s.iD)("a",{key:1,class:"page-link",href:"#",onClick:(0,o.iM)((a=>c.updatePage(t)),["prevent"])},(0,i.zw)(t),9,H))],2)))),128)),(0,s._)("li",{class:(0,i.C_)(["page-item",{disabled:!e.pages.has_next}])},[(0,s._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:a[1]||(a[1]=(0,o.iM)((t=>c.updatePage(e.pages.current_page+1)),["prevent"]))},Y)],2)])])}var q={props:["pages"],methods:{updatePage(t){this.$emit("emitPages",t)}}},K=e(89);const S=(0,K.Z)(q,[["render",Z]]);var T=S,F={data(){return{pagination:{},currentPage:1,tempProduct:{},products:[],isLoadingItem:""}},inject:["emitter"],components:{Pagination:T},methods:{getProducts(t=1,a=""){this.currentPage=t;const e=`https://vue3-course-api.hexschool.io/v2/api/sharon1987/products?page=${t}&category=${a}`;this.$http.get(e).then((t=>{this.products=t.data.products,this.pagination=t.data.pagination}))},addToCart(t,a=1){const e={product_id:t,qty:a};this.isLoadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/sharon1987/cart",{data:e}).then((t=>{console.log(t),this.getCart(),this.isLoadingItem="",z.Z.emit("get-cart")}))},getProduct(t){const a=`https://vue3-course-api.hexschool.io/v2/api/sharon1987/product/${t}`;this.loadingStatus.loadingItem=t,this.$http.get(a).then((t=>{this.loadingStatus.loadingItem="",this.product=t.data.product})).catch((t=>{alert(t.data.message)}))},getCart(){const t="https://vue3-course-api.hexschool.io/v2/api/sharon1987/cart";this.$http.get(t).then((t=>{this.cart=t.data.data})).catch((t=>{alert(t.data.message)}))}},mounted(){this.getProducts(),this.getCart()}};const N=(0,K.Z)(F,[["render",I]]);var A=N}}]);
//# sourceMappingURL=494.929cffbc.js.map